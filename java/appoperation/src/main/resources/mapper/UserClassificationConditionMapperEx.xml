<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC
    "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userClassificationConditionDAO">
  <select id="findUserClassificationsByResourceId" parameterType="Integer"
          resultMap="userClassificationConditionPO">
    SELECT
    u.id                        AS u_id
    ,u.name                      AS u_name
    ,u.short_expression          AS u_short_expression
    ,u.full_expression           AS u_full_expression
    ,u.effective_time            AS u_effective_time
    ,u.app_type                  AS u_app_type
    ,u.operate_user              AS u_operate_user
    ,u.create_time               AS u_create_time
    ,u.modify_time               AS u_modify_time
    ,u.status                    AS u_status
    FROM operation_resource_condition_relation AS r
              ON r.operation_resource_id = rs.id AND r.status = 1
    LEFT JOIN user_classification_condition AS u
              ON u.id = r.classification_condition_id AND u.status = 1
    WHERE r.operation_resource_id = #{resourceId}
  </select>
</mapper>
